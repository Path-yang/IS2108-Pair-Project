{% extends "base.html" %}
{% block title %}Low Stock Alerts Â· AuroraMart Staff{% endblock %}
{% block content %}
<div class="page-header">
    <div>
        <h1>Low Stock Alerts</h1>
        <p class="muted">Products at or below the reorder threshold.</p>
    </div>
    <a class="btn-back" href="{% url 'catalog:product_list' %}">Back to Catalogue</a>
</div>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>SKU</th>
                <th>Name</th>
                <th>Category</th>
                <th>On Hand</th>
                <th>Reorder</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
                <tr>
                    <td><strong>{{ product.sku }}</strong></td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.subcategory.category.name }}</td>
                    <td>
                        <span class="{% if product.quantity_on_hand <= 5 %}stock-critical{% elif product.quantity_on_hand <= 10 %}stock-low{% else %}stock-warning{% endif %}">
                            {{ product.quantity_on_hand }}
                        </span>
                    </td>
                    <td>{{ product.reorder_quantity }}</td>
                    <td><a href="{% url 'catalog:product_update' product.pk %}">Update stock</a></td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="6">
                        <div class="empty-state">
                            <h3>ðŸŽ‰ All Good!</h3>
                            <p>No products are currently under the reorder threshold.</p>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}